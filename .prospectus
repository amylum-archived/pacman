item do
  expected do
    url_xpath
    url 'https://projects.archlinux.org/pacman.git/refs/tags'
    xpath '//*[@id="cgit"]/div[1]/table/tr[2]/td[1]/a'
    regex /^v([\d.]+)$/
  end

  actual do
    git_tag
    regex /^(.*)-\d+$/
  end

  deps do
    %w(libarchive curl openssl zlib gpgme libgpg-error libassuan).each do |dep|
      item do
        name dep

        expected do
          github_release
          repo "amylum/#{dep}"
        end

        actual do
          grep
          file 'Makefile'
          regex /^#{dep.upcase}_VERSION = ([\w.-]+)$/
        end
      end
    end
  end
end
